(()=>{var e={};e.id=284,e.ids=[284],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},68621:e=>{"use strict";e.exports=require("punycode")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},70612:e=>{"use strict";e.exports=require("node:os")},97742:e=>{"use strict";e.exports=require("node:process")},25997:e=>{"use strict";e.exports=require("node:tty")},82682:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>h,serverHooks:()=>v,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>q});var s={};t.r(s),t.d(s,{GET:()=>d,POST:()=>l});var u=t(52412),i=t(14293),o=t(94147),a=t(87541),p=t(63302),n=t(27569);let c=new a.Z;async function d(){let e=await c.getAllForms();return Response.json({forms:e})}async function l(e){let r=(await (0,p.A)()).get("Authorization"),t=r?.split("Bearer ");(0,n.W)(t?.[1]||"");let{phone:s,name:u,description:i}=await e.json();return await c.addForm(s,u,i),Response.json({message:"Form added successfully"})}let h=new u.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/forms/route",pathname:"/api/forms",filename:"route",bundlePath:"app/api/forms/route"},resolvedPagePath:"/Users/sert/Documents/GitHub/ts-wedding-day/src/app/api/forms/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:x,workUnitAsyncStorage:q,serverHooks:v}=h;function m(){return(0,o.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:q})}},35303:()=>{},27569:(e,r,t)=>{"use strict";t.d(r,{W:()=>o});var s=t(55760),u=t.n(s);let i=process.env.SECRET_KEY||"your-secret-key";function o(e){if(!e)throw Error("No token provided");try{return u().verify(e,i),!0}catch(e){throw Error("Invalid token")}}},87541:(e,r,t)=>{"use strict";t.d(r,{Z:()=>p});var s=t(96378);let u=process.env.SPREADSHEET_ID,i="Forms!A:C",o=JSON.parse(Buffer.from(process.env.GOOGLE_CREDENTIALS||"","base64").toString("utf-8"));class a{constructor(){let e=new s.lkr.auth.GoogleAuth({credentials:o,scopes:["https://www.googleapis.com/auth/spreadsheets"]});this.sheets=s.lkr.sheets({version:"v4",auth:e})}async getAllForms(){let e=await this.sheets.spreadsheets.values.get({spreadsheetId:u,range:i});if(!e.data.values)return[];let[r,...t]=e.data.values;return t.map(e=>e.reduce((e,t,s)=>(e[r[s]]=t,e),{}))}async addForm(e,r,t){let s=new Date(new Date().getTime()+252e5).toISOString().replace("Z","+07:00");await this.sheets.spreadsheets.values.append({spreadsheetId:u,range:i,valueInputOption:"USER_ENTERED",requestBody:{values:[[e,r,t,s]]}})}async updateForm(e,r,t,s,i){let o=`Forms!A${e+1}:C${e+1}`;await this.sheets.spreadsheets.values.update({spreadsheetId:u,range:o,valueInputOption:"USER_ENTERED",requestBody:{values:[[r,t,s,i]]}})}async deleteForm(e){let r=`Forms!A${e+1}:C${e+1}`;await this.sheets.spreadsheets.values.clear({spreadsheetId:u,range:r})}}let p=a}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[147,575,760,748],()=>t(82682));module.exports=s})();